<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org">

<head>
    <title>Итоги УЗИ</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" th:href="@{/webjars/bootstrap/css/bootstrap.min.css} "/>
    <link th:href="@{/webjars//font-awesome/css/all.css}" rel="stylesheet" type="text/css" />
    <link th:href="@{/css/styles.css}" rel="stylesheet"/>

</head>
<body>
<nav class="navbar navbar-dark navbar-expand-sm fixed-top">
    <div class="container">
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#Navbar">
            <span class="navbar-toggler-icon"></span>
        </button>
        <a class="navbar-brand mr-auto" th:href="@{/uzi/listTodayOrders}"><img th:src="@{/img/logo.png}" height="40" width="80"></a>
        <div class="collapse navbar-collapse" id="Navbar">
            <ul class="navbar-nav mr-auto">
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" href="#" id="navbarDropdownUzi" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        <span class="fa fa-laptop fa-lg"></span> УЗИ</a>
                    <div class="dropdown-menu" aria-labelledby="navbarDropdownUzi">
                        <a class="dropdown-item" th:href="@{/uzi/listTodayOrders}">Записи УЗИ</a>
                        <a class="dropdown-item" th:href="@{/uzi/listProducts}">Список услуг УЗИ</a>
                    </div>
                </li>

                <li class="nav-item"><a class="nav-link" href="#">
                    <span class="fa fa-thermometer fa-lg"></span> Процедурный кабинет</a></li>
                <li class="nav-item"><a class="nav-link" href="#"><span class="fa fa-users fa-lg"></span>
                    Консультация</a></li>
                <li th:if="${#authorization.expression('hasRole(''ROLE_MANAGER'')')}" class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        <span class="fa fa-calculator fa-lg"></span> Статистика</a>
                    <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                        <a class="dropdown-item" th:href="@{/uzi/listCurrentWeekSalary}">Недельная зарплата врачей</a>
                        <a class="dropdown-item" th:href="@{/uzi/showSalariesBetweenDatesForm}">Зарплата врачей по датам</a>
                        <div class="dropdown-divider"></div>
                        <a class="dropdown-item" href="#">Статистика по дням</a>
                        <a class="dropdown-item" th:href="@{/uzi/showDetailsOfOrderListMonthly}">Статистика по периодам</a>
                        <div class="dropdown-divider"></div>
                        <a class="dropdown-item" th:href="@{/uzi/showSortByDateForm}">Записи узи по датам</a>
                    </div>
                </li>
            </ul>
        </div>
    </div>
</nav>

<br>
<div class="container" th:object="${stats}">
    <h1>Итоги УЗИ
        <br>
        <label th:text="${#calendars.format(day, 'dd MMM yyyy')}"/>
    </h1>
    <hr>
    <div class="form-group">
        <label>Общая сумма обследований: </label><label th:text="*{totalSum}"/>
    </div>
    <div class="form-group">
        <label>Зарплата узиста: </label><label th:text="*{uziTotalSum}"/>
    </div>
    <div class="form-group">
        <label>Зарплата врачам: </label><label th:text="*{doctorTotalSum}"/>
    </div>
    <div class="form-group">
        <label>Общее количество пациентов: </label><label th:text="*{totalPatients}"/>
    </div>
    <div class="form-group">
        <label>Количество неизв пациентов: </label><label th:text="*{unknownPatients}"/>
    </div>
    <div class="form-group">
        <label>Сумма обследований с неизв пациентами: </label><label th:text="*{unknownPatientsTotalSum}"/>
    </div>
    <div class="form-group">
        <label>Самое дорогое обследование: </label><label th:text="*{maxOrder}"/>
    </div>
    <div class="form-group">
        <label>Средняя стоимость обследования: </label><label th:text="*{averageOrder}"/>
    </div>
    <div class="form-group">
        <label>Самое большое количество направлений(Доктор): </label><label th:text="*{mostFrequentDoctor}"/> <label> с количеством: </label><label th:text="*{mostFrequentDoctorCount}"/>
    </div>
    <div class="form-group">
        <label>Самое большое количество направлений(Продукт): </label><label th:text="*{mostFrequentProduct}"/> <label> в количестве: </label><label th:text="*{mostFrequentProductCount}"/>
    </div>

    <a th:href="@{/uzi/showDetailsOfOrderList(daysAdd=${daysAdd}-1)}"
       class="btn btn-info btn-sm">Прошлый день</a>

    <a th:href="@{/uzi/showDetailsOfOrderList(daysAdd=${daysAdd}+1)}"
       class="btn btn-info btn-sm">Следующий день</a>
</div>

<script th:src="@{/webjars/jquery/jquery.min.js}"></script>
<script th:src="@{/webjars/popper.js/umd/popper.min.js}"></script>
<script th:src="@{/webjars/bootstrap/js/bootstrap.min.js}"></script>
<script type="text/javascript">
$(document).ready(function() {
    $('dropdown-toggle').dropdown()
});
</script>
</body>
</html>